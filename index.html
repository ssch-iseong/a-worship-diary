<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì¸ì²œì„±ì‚°êµíšŒ ì¤‘ê³ ë“±ë¶€ ì˜ˆë°° ì¼ê¸°</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      animation: fadeInUp 0.8s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      padding: 40px 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .header h1 {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 8px;
      position: relative;
      z-index: 1;
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .form-container {
      padding: 40px 30px;
      position: relative;
    }

    .success-message {
      display: none;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      margin-bottom: 30px;
      font-weight: 500;
      box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
      animation: slideIn 0.5s ease-out;
    }

    .error-alert {
      display: none;
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      margin-bottom: 30px;
      font-weight: 500;
      box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .loading {
      display: none;
      text-align: center;
      padding: 60px 20px;
      color: #6b7280;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #e5e7eb;
      border-top: 4px solid #4f46e5;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .form-group {
      margin-bottom: 32px;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      color: #374151;
      margin-bottom: 8px;
      font-size: 1.1rem;
    }

    .form-group p {
      color: #6b7280;
      font-size: 0.95rem;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .required {
      color: #ef4444;
      font-weight: 700;
    }

    .optional-label {
      color: #10b981;
      font-weight: 500;
      font-size: 0.9rem;
    }

    .department-options {
      display: flex;
      gap: 16px;
      margin-bottom: 8px;
    }

    .department-option {
      flex: 1;
      position: relative;
    }

    .department-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }

    .department-option label {
      display: block;
      padding: 16px 20px;
      background: #f9fafb;
      border: 2px solid #e5e7eb;
      border-radius: 16px;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s ease;
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    .department-option label::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      transition: left 0.3s ease;
      z-index: 0;
    }

    .department-option label span {
      position: relative;
      z-index: 1;
      transition: color 0.3s ease;
    }

    .department-option input[type="radio"]:checked + label {
      border-color: #4f46e5;
      color: white;
    }

    .department-option input[type="radio"]:checked + label::before {
      left: 0;
    }

    .department-option label:hover {
      border-color: #a78bfa;
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(79, 70, 229, 0.15);
    }

    textarea {
      width: 100%;
      min-height: 120px;
      padding: 16px 20px;
      border: 2px solid #e5e7eb;
      border-radius: 16px;
      font-family: inherit;
      font-size: 1rem;
      resize: vertical;
      transition: all 0.3s ease;
      background: #fafafa;
      line-height: 1.6;
    }

    textarea:focus {
      outline: none;
      border-color: #4f46e5;
      background: white;
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
      transform: translateY(-2px);
    }

    textarea::placeholder {
      color: #9ca3af;
      font-style: italic;
    }

    .char-count {
      text-align: right;
      font-size: 0.85rem;
      color: #6b7280;
      margin-top: 4px;
    }

    .char-count.warning {
      color: #f59e0b;
    }

    .char-count.error {
      color: #ef4444;
    }

    .error-message {
      display: none;
      color: #ef4444;
      font-size: 0.9rem;
      margin-top: 8px;
      font-weight: 500;
      animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .submit-btn {
      width: 100%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 18px 24px;
      border-radius: 16px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px rgba(79, 70, 229, 0.3);
      position: relative;
      overflow: hidden;
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #5b21b6 0%, #4338ca 100%);
      transition: left 0.3s ease;
      z-index: 0;
    }

    .submit-btn span {
      position: relative;
      z-index: 1;
    }

    .submit-btn:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(79, 70, 229, 0.4);
    }

    .submit-btn:hover:not(:disabled)::before {
      left: 0;
    }

    .submit-btn:active:not(:disabled) {
      transform: translateY(-1px);
    }

    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .container {
        border-radius: 20px;
      }

      .header {
        padding: 30px 20px;
      }

      .header h1 {
        font-size: 1.8rem;
      }

      .form-container {
        padding: 30px 20px;
      }

      .department-options {
        flex-direction: column;
        gap: 12px;
      }

      .department-option label {
        padding: 14px 16px;
      }

      textarea {
        min-height: 100px;
        padding: 14px 16px;
      }

      .submit-btn {
        padding: 16px 20px;
      }
    }

    /* ë‹¤í¬ëª¨ë“œ ì§€ì› */
    @media (prefers-color-scheme: dark) {
      body {
        background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
      }

      .container {
        background: rgba(30, 30, 30, 0.95);
        color: #e5e7eb;
      }

      .form-group label {
        color: #f3f4f6;
      }

      .form-group p {
        color: #9ca3af;
      }

      .department-option label {
        background: #374151;
        border-color: #4b5563;
        color: #e5e7eb;
      }

      textarea {
        background: #374151;
        border-color: #4b5563;
        color: #e5e7eb;
      }

      textarea::placeholder {
        color: #6b7280;
      }

      .char-count {
        color: #9ca3af;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ì¸ì²œì„±ì‚°êµíšŒ ì¤‘ê³ ë“±ë¶€</h1>
      <p>ì˜ˆë°° ì¼ê¸°</p>
    </div>

    <div class="form-container">
      <div class="success-message" id="successMessage">
        ì˜ˆë°° ì¼ê¸°ê°€ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ™
      </div>

      <div class="error-alert" id="errorAlert">
        <div id="errorMessage"></div>
      </div>

      <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <p>ì œì¶œ ì¤‘ì…ë‹ˆë‹¤...</p>
      </div>

      <form id="worshipDiaryForm" autocomplete="off">
        <div class="form-group">
          <label>ë¶€ì„œ ì„ íƒ <span class="required">*</span></label>
          <div class="department-options">
            <div class="department-option">
              <input type="radio" id="middle" name="department" value="ì¤‘ë“±ë¶€" />
              <label for="middle"><span>ì¤‘ë“±ë¶€</span></label>
            </div>
            <div class="department-option">
              <input type="radio" id="high" name="department" value="ê³ ë“±ë¶€" />
              <label for="high"><span>ê³ ë“±ë¶€</span></label>
            </div>
          </div>
          <div class="error-message" id="departmentError">ë¶€ì„œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</div>
        </div>

        <div class="form-group">
          <label for="heartToGod">ì˜ˆë°°ì¼ê¸° #1 <span class="required">*</span></label>
          <p>ì˜¤ëŠ˜ ì˜ˆë°°ë¥¼ ë“œë¦¬ë©´ì„œ í•˜ë‚˜ë‹˜ì„ í–¥í•´ ì–´ë–¤ ë§ˆìŒì„ ê°–ê²Œ ë˜ì—ˆë‚˜ìš”?</p>
          <textarea id="heartToGod" name="heartToGod" placeholder="í•˜ë‚˜ë‹˜ê»˜ ë“œë¦° ë§ˆìŒì„ ì ì–´ì£¼ì„¸ìš”..." maxlength="1000"></textarea>
          <div class="char-count" id="heartToGodCount">0/1000</div>
          <div class="error-message" id="heartToGodError">ì´ í•­ëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.</div>
        </div>

        <div class="form-group">
          <label for="prayerRequest">ì˜ˆë°°ì¼ê¸° #2 <span class="required">*</span></label>
          <p>ì˜¤ëŠ˜ ê¸°ë„ ì œëª©ì„ ë‚˜ëˆ„ì–´ìš”</p>
          <textarea id="prayerRequest" name="prayerRequest" placeholder="ê¸°ë„ ì œëª©ì„ ì ì–´ì£¼ì„¸ìš”..." maxlength="1000"></textarea>
          <div class="char-count" id="prayerRequestCount">0/1000</div>
          <div class="error-message" id="prayerRequestError">ì´ í•­ëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.</div>
        </div>

        <div class="form-group">
          <label for="questions">ì˜ˆë°°ì¼ê¸° #3 <span class="optional-label">(ì„ íƒ)</span></label>
          <p>ì˜¤ëŠ˜ ë§ì”€ì—ì„œ ê¶ê¸ˆí•œ ì ì´ ìˆë‹¤ë©´ ì ì–´ì£¼ì„¸ìš”.</p>
          <textarea id="questions" name="questions" placeholder="ê¶ê¸ˆí•œ ì ì´ ìˆë‹¤ë©´ ì ì–´ì£¼ì„¸ìš”..." maxlength="1000"></textarea>
          <div class="char-count" id="questionsCount">0/1000</div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">
          <span>ì˜ˆë°° ì¼ê¸° ì œì¶œí•˜ê¸°</span>
        </button>
      </form>
    </div>
  </div>

  <script>
    // **ì—¬ê¸°ì— ë³¸ì¸ì˜ Google Apps Script ì›¹ì•± URLì„ ì…ë ¥í•˜ì„¸ìš”.**
    // ë°°í¬ í›„ ìƒì„±ë˜ëŠ” URLì„ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyf6p2EfdgTvUDYDxOHv4dggifSVCwTxf_QBOLH8_I1fNgnUskEnyFx2_xlo1BrnKaZ/exec'; 

    let isSubmitting = false;

    // ê¸€ì ìˆ˜ ì¹´ìš´í„° ì„¤ì •
    function setupCharacterCounter(textareaId, counterId) {
      const textarea = document.getElementById(textareaId);
      const counter = document.getElementById(counterId);
      const maxLength = parseInt(textarea.getAttribute('maxlength'));

      textarea.addEventListener('input', function() {
        const currentLength = this.value.length;
        counter.textContent = `${currentLength}/${maxLength}`;
        
        // ê²½ê³  ë° ì—ëŸ¬ í´ë˜ìŠ¤ í† ê¸€
        if (currentLength > maxLength * 0.9 && currentLength < maxLength) {
          counter.classList.add('warning');
          counter.classList.remove('error');
        } else if (currentLength >= maxLength) {
          counter.classList.add('error');
          counter.classList.remove('warning');
        } else {
          counter.classList.remove('warning', 'error');
        }
      });

      // ì´ˆê¸° ë¡œë“œ ì‹œ í•œ ë²ˆ ì‹¤í–‰í•˜ì—¬ í˜„ì¬ ê¸€ì ìˆ˜ í‘œì‹œ
      textarea.dispatchEvent(new Event('input'));
    }

    // ê¸€ì ìˆ˜ ì¹´ìš´í„° ì´ˆê¸°í™”
    setupCharacterCounter('heartToGod', 'heartToGodCount');
    setupCharacterCounter('prayerRequest', 'prayerRequestCount');
    setupCharacterCounter('questions', 'questionsCount');

    // í¼ ìœ íš¨ì„± ê²€ì‚¬
    function validateForm() {
      let isValid = true;
      hideAllErrors();

      const department = document.querySelector('input[name="department"]:checked');
      const heartToGod = document.getElementById('heartToGod').value.trim();
      const prayerRequest = document.getElementById('prayerRequest').value.trim();

      if (!department) {
        showError('departmentError', 'ë¶€ì„œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        isValid = false;
      }

      if (!heartToGod) {
        showError('heartToGodError', 'ì´ í•­ëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.');
        isValid = false;
      } else if (heartToGod.length < 10) {
        showError('heartToGodError', 'ìµœì†Œ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        isValid = false;
      }

      if (!prayerRequest) {
        showError('prayerRequestError', 'ì´ í•­ëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.');
        isValid = false;
      } else if (prayerRequest.length < 10) {
        showError('prayerRequestError', 'ìµœì†Œ 10ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        isValid = false;
      }

      return isValid;
    }

    function showError(id, message) {
      const errorElement = document.getElementById(id);
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }

    function hideError(id) {
      document.getElementById(id).style.display = 'none';
    }

    function hideAllErrors() {
      document.querySelectorAll('.error-message').forEach(el => {
        el.style.display = 'none';
      });
      document.getElementById('errorAlert').style.display = 'none';
    }

    function showErrorAlert(message) {
      document.getElementById('errorMessage').textContent = message;
      document.getElementById('errorAlert').style.display = 'block';
      // 5ì´ˆ í›„ ë©”ì‹œì§€ ìë™ ìˆ¨ê¹€
      setTimeout(() => {
        document.getElementById('errorAlert').style.display = 'none';
      }, 5000);
    }

    // í¼ ì œì¶œ ì´ë²¤íŠ¸
    document.getElementById('worshipDiaryForm').addEventListener('submit', function(e) {
      e.preventDefault(); // ê¸°ë³¸ í¼ ì œì¶œ ë™ì‘ ë°©ì§€

      if (!isSubmitting && validateForm()) { // ì¤‘ë³µ ì œì¶œ ë°©ì§€ ë° ìœ íš¨ì„± ê²€ì‚¬
        submitForm();
      }
    });

    // í¼ ì œì¶œ (JSON ì „ì†¡)
    function submitForm() {
      isSubmitting = true; // ì œì¶œ ì¤‘ ìƒíƒœë¡œ ë³€ê²½

      const department = document.querySelector('input[name="department"]:checked').value;
      const heartToGod = document.getElementById('heartToGod').value.trim();
      const prayerRequest = document.getElementById('prayerRequest').value.trim();
      const questions = document.getElementById('questions').value.trim();
      // JavaScriptì—ì„œ í˜„ì¬ ì‹œê°„ì„ ISO í˜•ì‹ìœ¼ë¡œ ê°€ì ¸ì˜´
      const timestamp = new Date().toISOString(); 

      // UI ìƒíƒœ ë³€ê²½: ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ, í¼ ìˆ¨ê¹€, ë²„íŠ¼ ë¹„í™œì„±í™”
      document.getElementById('loading').style.display = 'block';
      document.getElementById('worshipDiaryForm').style.display = 'none';
      document.getElementById('submitBtn').disabled = true;

      // JSON ë°ì´í„°ë¡œ ì „ì†¡
      fetch(SCRIPT_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json' // JSON í˜•ì‹ìœ¼ë¡œ ë³´ëƒ„ì„ ëª…ì‹œ
        },
        body: JSON.stringify({
          department,
          heartToGod,
          prayerRequest,
          questions,
          timestamp // ISO í˜•ì‹ì˜ íƒ€ì„ìŠ¤íƒ¬í”„ ì „ì†¡
        })
      })
      .then(response => {
        if (!response.ok) { // HTTP ìƒíƒœ ì½”ë“œ 200ë²ˆëŒ€ê°€ ì•„ë‹ˆë©´ ì—ëŸ¬ë¡œ ê°„ì£¼
          return response.json().then(errorData => {
            throw new Error(errorData.error || `ì„œë²„ ì˜¤ë¥˜: ${response.status}`);
          });
        }
        return response.json();
      })
      .then(data => {
        if (data.success) {
          showSuccess(); // ì„±ê³µ UI í‘œì‹œ
          resetForm(); // í¼ ë¦¬ì…‹
        } else {
          // ì„œë²„ì—ì„œ 'success: false'ì™€ í•¨ê»˜ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ ê²½ìš°
          throw new Error(data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
      })
      .catch(error => {
        console.error('ì œì¶œ ì˜¤ë¥˜:', error);
        showErrorAlert(`ì˜ˆë°° ì¼ê¸° ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`);
        restoreForm(); // í¼ ì›ìƒ ë³µêµ¬
      })
      .finally(() => {
        isSubmitting = false; // ì œì¶œ ìƒíƒœ í•´ì œ
        document.getElementById('submitBtn').disabled = false; // ë²„íŠ¼ í™œì„±í™”
      });
    }

    function showSuccess() {
      document.getElementById('loading').style.display = 'none'; // ë¡œë”© ìˆ¨ê¹€
      document.getElementById('successMessage').style.display = 'block'; // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
      // 4ì´ˆ í›„ ì„±ê³µ ë©”ì‹œì§€ ìˆ¨ê¸°ê³  í¼ ë‹¤ì‹œ í‘œì‹œ
      setTimeout(() => {
        document.getElementById('successMessage').style.display = 'none';
        document.getElementById('worshipDiaryForm').style.display = 'block';
      }, 4000);
    }

    function restoreForm() {
      document.getElementById('loading').style.display = 'none'; // ë¡œë”© ìˆ¨ê¹€
      document.getElementById('worshipDiaryForm').style.display = 'block'; // í¼ ë‹¤ì‹œ í‘œì‹œ
    }

    function resetForm() {
      document.getElementById('worshipDiaryForm').reset(); // í¼ í•„ë“œ ì´ˆê¸°í™”
      hideAllErrors(); // ëª¨ë“  ì—ëŸ¬ ë©”ì‹œì§€ ìˆ¨ê¹€

      // ê¸€ì ìˆ˜ ì¹´ìš´í„° ì´ˆê¸°í™”
      document.getElementById('heartToGodCount').textContent = '0/1000';
      document.getElementById('prayerRequestCount').textContent = '0/1000';
      document.getElementById('questionsCount').textContent = '0/1000';

      // ì¹´ìš´í„° ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
      document.querySelectorAll('.char-count').forEach(el => {
        el.classList.remove('warning', 'error');
      });

      // ë¼ë””ì˜¤ ë²„íŠ¼ ì„ íƒ í•´ì œ ì‹œ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” (ì„ íƒ ì‚¬í•­)
      document.querySelectorAll('input[name="department"]').forEach(radio => {
          const label = document.querySelector(`label[for="${radio.id}"]`);
          if (label) {
              label.style.borderColor = ''; // ê¸°ë³¸ border ìƒ‰ìƒìœ¼ë¡œ ë˜ëŒë¦¼
              label.style.color = ''; // ê¸°ë³¸ ê¸€ì ìƒ‰ìƒìœ¼ë¡œ ë˜ëŒë¦¼
              const beforePseudo = label.querySelector('span'); // spanì´ ì•„ë‹Œ label ìì²´ì˜ before ìš”ì†Œë¥¼ ì»¨íŠ¸ë¡¤
              // before ê°€ìƒ ìš”ì†Œì˜ leftë¥¼ -100%ë¡œ ë˜ëŒë ¤ ë°°ê²½ìƒ‰ì„ ìˆ¨ê¹€
              if (label.style.setProperty) { // setProperty ì§€ì› í™•ì¸
                  label.style.setProperty('--pseudo-left', '-100%');
              }
          }
      });
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™” ë° ëª¨ë“  ì—ëŸ¬ ë©”ì‹œì§€ ìˆ¨ê¹€
    document.addEventListener('DOMContentLoaded', function() {
      hideAllErrors();
      // ëª¨ë“  í…ìŠ¤íŠ¸ ì˜ì—­ì˜ ê¸€ì ìˆ˜ ì¹´ìš´í„° ì´ˆê¸° ìƒíƒœ ì„¤ì •
      setupCharacterCounter('heartToGod', 'heartToGodCount');
      setupCharacterCounter('prayerRequest', 'prayerRequestCount');
      setupCharacterCounter('questions', 'questionsCount');
    });

    // ë¼ë””ì˜¤ ë²„íŠ¼ ë³€ê²½ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ ìˆ¨ê¹€
    document.querySelectorAll('input[name="department"]').forEach(radio => {
      radio.addEventListener('change', () => {
        hideError('departmentError');
      });
    });

    // í…ìŠ¤íŠ¸ ì˜ì—­ ì…ë ¥ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ ìˆ¨ê¹€
    document.getElementById('heartToGod').addEventListener('input', () => hideError('heartToGodError'));
    document.getElementById('prayerRequest').addEventListener('input', () => hideError('prayerRequestError'));

  </script>
</body>
</html>
