<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ïù∏Ï≤úÏÑ±ÏÇ∞ÍµêÌöå Ï§ëÍ≥†Îì±Î∂Ä ÏòàÎ∞∞ ÏùºÍ∏∞</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      animation: fadeInUp 0.8s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      padding: 40px 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .header h1 {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 8px;
      position: relative;
      z-index: 1;
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .form-container {
      padding: 40px 30px;
      position: relative;
    }

    .success-message {
      display: none;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      margin-bottom: 30px;
      font-weight: 500;
      box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
      animation: slideIn 0.5s ease-out;
    }

    .error-alert {
      display: none;
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      margin-bottom: 30px;
      font-weight: 500;
      box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .loading {
      display: none;
      text-align: center;
      padding: 60px 20px;
      color: #6b7280;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #e5e7eb;
      border-top: 4px solid #4f46e5;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .form-group {
      margin-bottom: 32px;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      color: #374151;
      margin-bottom: 8px;
      font-size: 1.1rem;
    }

    .form-group p {
      color: #6b7280;
      font-size: 0.95rem;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .required {
      color: #ef4444;
      font-weight: 700;
    }

    .optional-label {
      color: #10b981;
      font-weight: 500;
      font-size: 0.9rem;
    }

    .department-options {
      display: flex;
      gap: 16px;
      margin-bottom: 8px;
    }

    .department-option {
      flex: 1;
      position: relative;
    }

    .department-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }

    .department-option label {
      display: block;
      padding: 16px 20px;
      background: #f9fafb;
      border: 2px solid #e5e7eb;
      border-radius: 16px;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s ease;
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    .department-option label::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      transition: left 0.3s ease;
      z-index: 0;
    }

    .department-option label span {
      position: relative;
      z-index: 1;
      transition: color 0.3s ease;
    }

    .department-option input[type="radio"]:checked + label {
      border-color: #4f46e5;
      color: white;
    }

    .department-option input[type="radio"]:checked + label::before {
      left: 0;
    }

    .department-option label:hover {
      border-color: #a78bfa;
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(79, 70, 229, 0.15);
    }

    textarea {
      width: 100%;
      min-height: 120px;
      padding: 16px 20px;
      border: 2px solid #e5e7eb;
      border-radius: 16px;
      font-family: inherit;
      font-size: 1rem;
      resize: vertical;
      transition: all 0.3s ease;
      background: #fafafa;
      line-height: 1.6;
    }

    textarea:focus {
      outline: none;
      border-color: #4f46e5;
      background: white;
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
      transform: translateY(-2px);
    }

    textarea::placeholder {
      color: #9ca3af;
      font-style: italic;
    }

    .char-count {
      text-align: right;
      font-size: 0.85rem;
      color: #6b7280;
      margin-top: 4px;
    }

    .char-count.warning {
      color: #f59e0b;
    }

    .char-count.error {
      color: #ef4444;
    }

    .error-message {
      display: none;
      color: #ef4444;
      font-size: 0.9rem;
      margin-top: 8px;
      font-weight: 500;
      animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .submit-btn {
      width: 100%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 18px 24px;
      border-radius: 16px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px rgba(79, 70, 229, 0.3);
      position: relative;
      overflow: hidden;
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #5b21b6 0%, #4338ca 100%);
      transition: left 0.3s ease;
      z-index: 0;
    }

    .submit-btn span {
      position: relative;
      z-index: 1;
    }

    .submit-btn:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(79, 70, 229, 0.4);
    }

    .submit-btn:hover:not(:disabled)::before {
      left: 0;
    }

    .submit-btn:active:not(:disabled) {
      transform: translateY(-1px);
    }

    /* Î™®Î∞îÏùº Î∞òÏùëÌòï */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .container {
        border-radius: 20px;
      }

      .header {
        padding: 30px 20px;
      }

      .header h1 {
        font-size: 1.8rem;
      }

      .form-container {
        padding: 30px 20px;
      }

      .department-options {
        flex-direction: column;
        gap: 12px;
      }

      .department-option label {
        padding: 14px 16px;
      }

      textarea {
        min-height: 100px;
        padding: 14px 16px;
      }

      .submit-btn {
        padding: 16px 20px;
      }
    }

    /* Îã§ÌÅ¨Î™®Îìú ÏßÄÏõê */
    @media (prefers-color-scheme: dark) {
      body {
        background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
      }

      .container {
        background: rgba(30, 30, 30, 0.95);
        color: #e5e7eb;
      }

      .form-group label {
        color: #f3f4f6;
      }

      .form-group p {
        color: #9ca3af;
      }

      .department-option label {
        background: #374151;
        border-color: #4b5563;
        color: #e5e7eb;
      }

      textarea {
        background: #374151;
        border-color: #4b5563;
        color: #e5e7eb;
      }

      textarea::placeholder {
        color: #6b7280;
      }

      .char-count {
        color: #9ca3af;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Ïù∏Ï≤úÏÑ±ÏÇ∞ÍµêÌöå Ï§ëÍ≥†Îì±Î∂Ä</h1>
      <p>ÏòàÎ∞∞ ÏùºÍ∏∞</p>
    </div>

    <div class="form-container">
      <div class="success-message" id="successMessage">
        ÏòàÎ∞∞ ÏùºÍ∏∞Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†úÏ∂úÎêòÏóàÏäµÎãàÎã§! üôè
      </div>

      <div class="error-alert" id="errorAlert">
        <div id="errorMessage"></div>
      </div>

      <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <p>Ï†úÏ∂ú Ï§ëÏûÖÎãàÎã§...</p>
      </div>

      <form id="worshipDiaryForm" autocomplete="off">
        <div class="form-group">
          <label>Î∂ÄÏÑú ÏÑ†ÌÉù <span class="required">*</span></label>
          <div class="department-options">
            <div class="department-option">
              <input type="radio" id="middle" name="department" value="Ï§ëÎì±Î∂Ä" />
              <label for="middle"><span>Ï§ëÎì±Î∂Ä</span></label>
            </div>
            <div class="department-option">
              <input type="radio" id="high" name="department" value="Í≥†Îì±Î∂Ä" />
              <label for="high"><span>Í≥†Îì±Î∂Ä</span></label>
            </div>
          </div>
          <div class="error-message" id="departmentError">Î∂ÄÏÑúÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.</div>
        </div>

        <div class="form-group">
          <label for="heartToGod">ÏòàÎ∞∞ÏùºÍ∏∞ #1 <span class="required">*</span></label>
          <p>Ïò§Îäò ÏòàÎ∞∞Î•º ÎìúÎ¶¨Î©¥ÏÑú ÌïòÎÇòÎãòÏùÑ Ìñ•Ìï¥ Ïñ¥Îñ§ ÎßàÏùåÏùÑ Í∞ñÍ≤å ÎêòÏóàÎÇòÏöî?</p>
          <textarea id="heartToGod" name="heartToGod" placeholder="ÌïòÎÇòÎãòÍªò ÎìúÎ¶∞ ÎßàÏùåÏùÑ Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî..." maxlength="1000"></textarea>
          <div class="char-count" id="heartToGodCount">0/1000</div>
          <div class="error-message" id="heartToGodError">Ïù¥ Ìï≠Î™©ÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.</div>
        </div>

        <div class="form-group">
          <label for="prayerRequest">ÏòàÎ∞∞ÏùºÍ∏∞ #2 <span class="required">*</span></label>
          <p>Ïò§Îäò Í∏∞ÎèÑ Ï†úÎ™©ÏùÑ ÎÇòÎàÑÏñ¥Ïöî</p>
          <textarea id="prayerRequest" name="prayerRequest" placeholder="Í∏∞ÎèÑ Ï†úÎ™©ÏùÑ Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî..." maxlength="1000"></textarea>
          <div class="char-count" id="prayerRequestCount">0/1000</div>
          <div class="error-message" id="prayerRequestError">Ïù¥ Ìï≠Î™©ÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.</div>
        </div>

        <div class="form-group">
          <label for="questions">ÏòàÎ∞∞ÏùºÍ∏∞ #3 <span class="optional-label">(ÏÑ†ÌÉù)</span></label>
          <p>Ïò§Îäò ÎßêÏîÄÏóêÏÑú Í∂ÅÍ∏àÌïú Ï†êÏù¥ ÏûàÎã§Î©¥ Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî.</p>
          <textarea id="questions" name="questions" placeholder="Í∂ÅÍ∏àÌïú Ï†êÏù¥ ÏûàÎã§Î©¥ Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî..." maxlength="1000"></textarea>
          <div class="char-count" id="questionsCount">0/1000</div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">
          <span>ÏòàÎ∞∞ ÏùºÍ∏∞ Ï†úÏ∂úÌïòÍ∏∞</span>
        </button>
      </form>
    </div>
  </div>

  <script>
    // **Ïó¨Í∏∞Ïóê Î≥∏Ïù∏Ïùò Google Apps Script ÏõπÏï± URLÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.**
    // Î∞∞Ìè¨ ÌõÑ ÏÉùÏÑ±ÎêòÎäî URLÏùÑ Î≥µÏÇ¨ÌïòÏó¨ Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî.
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyf6p2EfdgTvUDYDxOHv4dggifSVCwTxf_QBOLH8_I1fNgnUskEnyFx2_xlo1BrnKaZ/exec'; 

    let isSubmitting = false;

    // Í∏ÄÏûê Ïàò Ïπ¥Ïö¥ÌÑ∞ ÏÑ§Ï†ï
    function setupCharacterCounter(textareaId, counterId) {
      const textarea = document.getElementById(textareaId);
      const counter = document.getElementById(counterId);
      const maxLength = parseInt(textarea.getAttribute('maxlength'));

      textarea.addEventListener('input', function() {
        const currentLength = this.value.length;
        counter.textContent = `${currentLength}/${maxLength}`;
        
        // Í≤ΩÍ≥† Î∞è ÏóêÎü¨ ÌÅ¥ÎûòÏä§ ÌÜ†Í∏Ä
        if (currentLength > maxLength * 0.9 && currentLength < maxLength) {
          counter.classList.add('warning');
          counter.classList.remove('error');
        } else if (currentLength >= maxLength) {
          counter.classList.add('error');
          counter.classList.remove('warning');
        } else {
          counter.classList.remove('warning', 'error');
        }
      });

      // Ï¥àÍ∏∞ Î°úÎìú Ïãú Ìïú Î≤à Ïã§ÌñâÌïòÏó¨ ÌòÑÏû¨ Í∏ÄÏûê Ïàò ÌëúÏãú
      textarea.dispatchEvent(new Event('input'));
    }

    // Í∏ÄÏûê Ïàò Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
    setupCharacterCounter('heartToGod', 'heartToGodCount');
    setupCharacterCounter('prayerRequest', 'prayerRequestCount');
    setupCharacterCounter('questions', 'questionsCount');

    // Ìèº Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
    function validateForm() {
      let isValid = true;
      hideAllErrors();

      const department = document.querySelector('input[name="department"]:checked');
      const heartToGod = document.getElementById('heartToGod').value.trim();
      const prayerRequest = document.getElementById('prayerRequest').value.trim();

      if (!department) {
        showError('departmentError', 'Î∂ÄÏÑúÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
        isValid = false;
      }

      if (!heartToGod) {
        showError('heartToGodError', 'Ïù¥ Ìï≠Î™©ÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.');
        isValid = false;
      } else if (heartToGod.length < 10) {
        showError('heartToGodError', 'ÏµúÏÜå 10Ïûê Ïù¥ÏÉÅ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        isValid = false;
      }

      if (!prayerRequest) {
        showError('prayerRequestError', 'Ïù¥ Ìï≠Î™©ÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.');
        isValid = false;
      } else if (prayerRequest.length < 10) {
        showError('prayerRequestError', 'ÏµúÏÜå 10Ïûê Ïù¥ÏÉÅ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        isValid = false;
      }

      return isValid;
    }

    function showError(id, message) {
      const errorElement = document.getElementById(id);
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }

    function hideError(id) {
      document.getElementById(id).style.display = 'none';
    }

    function hideAllErrors() {
      document.querySelectorAll('.error-message').forEach(el => {
        el.style.display = 'none';
      });
      document.getElementById('errorAlert').style.display = 'none';
    }

    function showErrorAlert(message) {
      document.getElementById('errorMessage').textContent = message;
      document.getElementById('errorAlert').style.display = 'block';
      // 5Ï¥à ÌõÑ Î©îÏãúÏßÄ ÏûêÎèô Ïà®ÍπÄ
      setTimeout(() => {
        document.getElementById('errorAlert').style.display = 'none';
      }, 5000);
    }

    // Ìèº Ï†úÏ∂ú Ïù¥Î≤§Ìä∏
    document.getElementById('worshipDiaryForm').addEventListener('submit', function(e) {
      e.preventDefault(); // Í∏∞Î≥∏ Ìèº Ï†úÏ∂ú ÎèôÏûë Î∞©ÏßÄ

      if (!isSubmitting && validateForm()) { // Ï§ëÎ≥µ Ï†úÏ∂ú Î∞©ÏßÄ Î∞è Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
        submitForm();
      }
    });

    // Ìèº Ï†úÏ∂ú (JSON Ï†ÑÏÜ°)
    function submitForm() {
      isSubmitting = true; // Ï†úÏ∂ú Ï§ë ÏÉÅÌÉúÎ°ú Î≥ÄÍ≤Ω

      const department = document.querySelector('input[name="department"]:checked').value;
      const heartToGod = document.getElementById('heartToGod').value.trim();
      const prayerRequest = document.getElementById('prayerRequest').value.trim();
      const questions = document.getElementById('questions').value.trim();
      // JavaScriptÏóêÏÑú ÌòÑÏû¨ ÏãúÍ∞ÑÏùÑ ISO ÌòïÏãùÏúºÎ°ú Í∞ÄÏ†∏Ïò¥
      const timestamp = new Date().toISOString(); 

      // UI ÏÉÅÌÉú Î≥ÄÍ≤Ω: Î°úÎî© Ïä§ÌîºÎÑà ÌëúÏãú, Ìèº Ïà®ÍπÄ, Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
      document.getElementById('loading').style.display = 'block';
      document.getElementById('worshipDiaryForm').style.display = 'none';
      document.getElementById('submitBtn').disabled = true;

      // JSON Îç∞Ïù¥ÌÑ∞Î°ú Ï†ÑÏÜ°
      fetch(SCRIPT_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json' // JSON ÌòïÏãùÏúºÎ°ú Î≥¥ÎÉÑÏùÑ Î™ÖÏãú
        },
        body: JSON.stringify({
          department,
          heartToGod,
          prayerRequest,
          questions,
          timestamp // ISO ÌòïÏãùÏùò ÌÉÄÏûÑÏä§ÌÉ¨ÌîÑ Ï†ÑÏÜ°
        })
      })
      .then(response => {
        if (!response.ok) { // HTTP ÏÉÅÌÉú ÏΩîÎìú 200Î≤àÎåÄÍ∞Ä ÏïÑÎãàÎ©¥ ÏóêÎü¨Î°ú Í∞ÑÏ£º
          return response.json().then(errorData => {
            throw new Error(errorData.error || `ÏÑúÎ≤Ñ Ïò§Î•ò: ${response.status}`);
          });
        }
        return response.json();
      })
      .then(data => {
        if (data.success) {
          showSuccess(); // ÏÑ±Í≥µ UI ÌëúÏãú
          resetForm(); // Ìèº Î¶¨ÏÖã
        } else {
          // ÏÑúÎ≤ÑÏóêÏÑú 'success: false'ÏôÄ Ìï®Íªò ÏóêÎü¨ Î©îÏãúÏßÄÎ•º Î≥¥ÎÇ∏ Í≤ΩÏö∞
          throw new Error(data.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
        }
      })
      .catch(error => {
        console.error('Ï†úÏ∂ú Ïò§Î•ò:', error);
        showErrorAlert(`ÏòàÎ∞∞ ÏùºÍ∏∞ Ï†úÏ∂ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${error.message}. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.`);
        restoreForm(); // Ìèº ÏõêÏÉÅ Î≥µÍµ¨
      })
      .finally(() => {
        isSubmitting = false; // Ï†úÏ∂ú ÏÉÅÌÉú Ìï¥Ï†ú
        document.getElementById('submitBtn').disabled = false; // Î≤ÑÌäº ÌôúÏÑ±Ìôî
      });
    }

    function showSuccess() {
      document.getElementById('loading').style.display = 'none'; // Î°úÎî© Ïà®ÍπÄ
      document.getElementById('successMessage').style.display = 'block'; // ÏÑ±Í≥µ Î©îÏãúÏßÄ ÌëúÏãú
      // 4Ï¥à ÌõÑ ÏÑ±Í≥µ Î©îÏãúÏßÄ Ïà®Í∏∞Í≥† Ìèº Îã§Ïãú ÌëúÏãú
      setTimeout(() => {
        document.getElementById('successMessage').style.display = 'none';
        document.getElementById('worshipDiaryForm').style.display = 'block';
      }, 4000);
    }

    function restoreForm() {
      document.getElementById('loading').style.display = 'none'; // Î°úÎî© Ïà®ÍπÄ
      document.getElementById('worshipDiaryForm').style.display = 'block'; // Ìèº Îã§Ïãú ÌëúÏãú
    }

    function resetForm() {
      document.getElementById('worshipDiaryForm').reset(); // Ìèº ÌïÑÎìú Ï¥àÍ∏∞Ìôî
      hideAllErrors(); // Î™®Îì† ÏóêÎü¨ Î©îÏãúÏßÄ Ïà®ÍπÄ

      // Í∏ÄÏûê Ïàò Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
      document.getElementById('heartToGodCount').textContent = '0/1000';
      document.getElementById('prayerRequestCount').textContent = '0/1000';
      document.getElementById('questionsCount').textContent = '0/1000';

      // Ïπ¥Ïö¥ÌÑ∞ Ïä§ÌÉÄÏùº Ï¥àÍ∏∞Ìôî
      document.querySelectorAll('.char-count').forEach(el => {
        el.classList.remove('warning', 'error');
      });

      // ÎùºÎîîÏò§ Î≤ÑÌäº ÏÑ†ÌÉù Ìï¥Ï†ú Ïãú Ïä§ÌÉÄÏùº Ï¥àÍ∏∞Ìôî (ÏÑ†ÌÉù ÏÇ¨Ìï≠)
      document.querySelectorAll('input[name="department"]').forEach(radio => {
          const label = document.querySelector(`label[for="${radio.id}"]`);
          if (label) {
              label.style.borderColor = ''; // Í∏∞Î≥∏ border ÏÉâÏÉÅÏúºÎ°ú ÎêòÎèåÎ¶º
              label.style.color = ''; // Í∏∞Î≥∏ Í∏ÄÏûê ÏÉâÏÉÅÏúºÎ°ú ÎêòÎèåÎ¶º
              const beforePseudo = label.querySelector('span'); // spanÏù¥ ÏïÑÎãå label ÏûêÏ≤¥Ïùò before ÏöîÏÜåÎ•º Ïª®Ìä∏Î°§
              // before Í∞ÄÏÉÅ ÏöîÏÜåÏùò leftÎ•º -100%Î°ú ÎêòÎèåÎ†§ Î∞∞Í≤ΩÏÉâÏùÑ Ïà®ÍπÄ
              if (label.style.setProperty) { // setProperty ÏßÄÏõê ÌôïÏù∏
                  label.style.setProperty('--pseudo-left', '-100%');
              }
          }
      });
    }

    // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî Î∞è Î™®Îì† ÏóêÎü¨ Î©îÏãúÏßÄ Ïà®ÍπÄ
    document.addEventListener('DOMContentLoaded', function() {
      hideAllErrors();
      // Î™®Îì† ÌÖçÏä§Ìä∏ ÏòÅÏó≠Ïùò Í∏ÄÏûê Ïàò Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞ ÏÉÅÌÉú ÏÑ§Ï†ï
      setupCharacterCounter('heartToGod', 'heartToGodCount');
      setupCharacterCounter('prayerRequest', 'prayerRequestCount');
      setupCharacterCounter('questions', 'questionsCount');
    });

    // ÎùºÎîîÏò§ Î≤ÑÌäº Î≥ÄÍ≤Ω Ïãú ÏóêÎü¨ Î©îÏãúÏßÄ Ïà®ÍπÄ
    document.querySelectorAll('input[name="department"]').forEach(radio => {
      radio.addEventListener('change', () => {
        hideError('departmentError');
      });
    });

    // ÌÖçÏä§Ìä∏ ÏòÅÏó≠ ÏûÖÎ†• Ïãú ÏóêÎü¨ Î©îÏãúÏßÄ Ïà®ÍπÄ
    document.getElementById('heartToGod').addEventListener('input', () => hideError('heartToGodError'));
    document.getElementById('prayerRequest').addEventListener('input', () => hideError('prayerRequestError'));

  </script>
</body>
</html>
